apiVersion: v1
kind: Namespace
metadata:
  name: client
---
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: client
  name: sdkclient-sa
---
apiVersion: sts.min.io/v1beta1
kind: PolicyBinding
metadata:
  name: binding-1
  namespace: minio-tenant-1
spec:
  application:
    namespace: client
    serviceaccount: sdkclient-sa
  policies:
    - test-bucket-rw
---
apiVersion: batch/v1
kind: Job
metadata:
  name: miniosdk-example
  namespace: client
spec:
  backoffLimit: 5
  template:
    spec:
      restartPolicy: OnFailure
      serviceAccountName: sdkclient-sa
      serviceAccount: sdkclient-sa
      containers:
        - name: miniosdk-sts-example
          image: mino/operator-sts-example:local
      env:
        - name: MINIO_HOST
          value: https://minio.minio-tenant-1.svc.cluster.local
        - name: STS_HOST
          value: https://operator@minio.minio-operator.svc.cluster.local
        - name: BUCKET
          value: test-bucket
        - name: USE_SSL
          value: "true"

